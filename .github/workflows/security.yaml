name: Security

on: [push, pull_request]

jobs:
  run-security:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Set up Ruby 2.7.2
      uses: actions/setup-ruby@v1
      with:
        ruby-version: 2.7.2

    - name: Install Brakeman
      run: |
        gem install brakeman
    - name: Run Brakeman
      run: |
        brakeman -f json # > tmp/brakeman.json || exit 0
    - name: Brakeman Report
      uses: devmasx/brakeman-linter-action@v1.0.0
      env:
        REPORT_PATH: tmp/brakeman.json
        GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}

